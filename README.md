# Reconciliation system

## Training lab #6 

#### Goals
At the end of this lab you should have a great knowledge in:
1. Working with IO/NIO Java API.
1. Reading and Writing system files.
1. Parsing CSV and JSON formats. 
1. Apply OOP SOLID principles.
1. Use Dependency Injection and applying Design Patterns (like Strategy and DAO patterns).
1. Practice separation of software components packages by introducing multiple modules.

## Introduction
In accounting, *reconciliation* is the process of ensuring that two sets of records (financial transactions) matches each other. Reconciliation is used to validate that different financial systems recorded the same financial transactions. 

A reconciliation system needs to be flexible enough to be able to process transactions generated by any financial system (like, Core Banking Systems, Online Payment Systems, Checks Clearing Systems, Payroll Systems...)
Different systems generate their transactions in different **formats** (CSV, Excel, XML, JSON...) and expose these data using different **delivery channels** (File system, Web service, Message queues...).

In this task, you are required to implement a console application which should be able to handle System Files as a delivery channel, and both CSV and JSON file formats. The application should read two files, compare the records of these files and produce result files showing the matched, mismatched and missing records.


## Requirements
description here

## File formats

#### CSV file format 
In this CSV file, the first line is the header names, and the financial transactions starts from the second line with the following fields:
1. **trans unique id**: the transaction's unique id 
1. **trans description**: the transaction description
1. **amount**
1. **currecny**: following ISO 4217 alphabetic code
1. **purpose**
1. **value date**: following the format `yyyy-MM-dd`
1. **trans type**: whether the transaction is a credit or debit
example:
```csv
trans unique id,trans description,amount,currecny,purpose,value date,trans type
TR-47884222201,online transfer,140,USD,donation,2020-01-20,D
TR-47884222202,atm withdrwal,20.0000,JOD,,2020-01-22,D
TR-47884222203,counter withdrawal,5000,JOD,,2020-01-25,D
TR-47884222204,salary,1200.000,JOD,donation,2020-01-31,C
TR-47884222205,atm withdrwal,60.0,JOD,,2020-02-02,D
TR-47884222206,atm withdrwal,500.0,USD,,2020-02-10,D
```
#### JSON file format
The json file consists of an array of transactions with the following properties:
1. **date**: following the format `dd/MM/yyyy`
1. **reference**: the transaction's unique id
1. **amount**
1. **currencyCode**: following ISO 4217 alphabetic code
1. **purpose**

```json
[
  {
    "date": "20/01/2020",
    "reference": "TR-47884222201",
    "amount": "140.00",
    "currencyCode": "USD",
    "purpose": "donation"
  },
  {
    "date": "03-02-2020",
    "reference": "TR-47884222205",
    "amount": "60.000",
    "currencyCode": "JOD",
    "purpose": ""
  },
  {
    "date": "10/02/2020",
    "reference": "TR-47884222206",
    "amount": "500.00",
    "currencyCode": "USD",
    "purpose": "general"
  },
  {
    "date": "22/01/2020",
    "reference": "TR-47884222202",
    "amount": "30.000",
    "currencyCode": "JOD",
    "purpose": "donation"
  },
  {
    "date": "14/02/2020",
    "reference": "TR-47884222217",
    "amount": "12000.000",
    "currencyCode": "JOD",
    "purpose": "salary"
  },
  {
    "date": "25/01/2020",
    "reference": "TR-47884222203",
    "amount": "5000.000",
    "currencyCode": "JOD",
    "purpose": "not specified"
  },
  {
    "date": "12/01/2020",
    "reference": "TR-47884222245",
    "amount": "420.00",
    "currencyCode": "USD",
    "purpose": "loan"
  }
]
```
 
#### Result file format
 
The comparision result should be written to 3 CSV files with the following details:

###### Matching records file
This file shall contain all the matching records, with the following details

1. **transaction id**
1. **amount**: formatted with decimal places as per the currency specification (see `E` column in https://en.wikipedia.org/wiki/ISO_4217#Active_codes) 
1. **currency code**: following ISO 4217 alphabetic code
1. **value date**: having the format `yyyy-MM-dd`

example:
```csv
transaction id,amount,currecny code,value date
TR-47884222201,140.00,USD,2020-01-20
TR-47884222203,5000.000,JOD,2020-01-25
TR-47884222206,500.00,USD,2020-02-10
```

###### Mismatched records file
This file contains the records that has been found on both files, but one or more of the financial details (amount, currency and value date) did not match.

1. **transaction id**
1. **amount**: formatted with decimal places as per the currency specification (see `E` column in https://en.wikipedia.org/wiki/ISO_4217#Active_codes) 
1. **currency code**: following ISO 4217 alphabetic code
1. **value date**: having the format `yyyy-MM-dd`

Each two mismatched records should be written below each other, see the below example:
```csv
transaction id,amount,currecny code,value date
TR-47884222202,20.000,JOD,2020-01-22
TR-47884222202,30.000,JOD,2020-01-22
TR-47884222205,60.000,JOD,2020-02-02
TR-47884222205,60.000,JOD,2020-02-03
```

###### Missing records file 
This file shows the records that were present in one file but not the other.

1. **found in file**: if present in first file, the value should be `SOURCE`, otherwise `TARGET`
1. **transaction id**
1. **amount**: formatted with decimal places as per the currency specification (see `E` column in https://en.wikipedia.org/wiki/ISO_4217#Active_codes) 
1. **currency code**: following ISO 4217 alphabetic code
1. **value date**: having the format `yyyy-MM-dd` 

example:
```csv
SOURCE,TR-47884222204,1200.000,JOD,2020-01-31
TARGET,TR-47884222217,12000.000,JOD,2020-02-14
TARGET,TR-47884222245,420.00,USD,2020-01-12
```